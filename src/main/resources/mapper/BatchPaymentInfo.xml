<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shin.pay.dao.BatchPaymentDAO" >
        <resultMap id="ibator_BaseResultMap" type="com.shin.pay.entity.BatchPaymentInfo" >
                <result column="id" property="id" jdbcType="BIGINT" />
                <result column="batchOrderId" property="batchOrderId" jdbcType="BIGINT" />
                <result column="batchOrderNo" property="batchOrderNo" jdbcType="VARCHAR" />
                <result column="merchantCode" property="merchantCode" jdbcType="VARCHAR" />
                <result column="busiTypeId" property="busiTypeId" jdbcType="VARCHAR" />
                <result column="payPriority" property="payPriority" jdbcType="VARCHAR" />
                <result column="currentPriority" property="currentPriority" jdbcType="VARCHAR" />
                <result column="orderTime" property="orderTime" jdbcType="TIMESTAMP" />
                <result column="status" property="status" jdbcType="SMALLINT" />
                <result column="transTypeId" property="transTypeId" jdbcType="VARCHAR" />
                <result column="batchAmount" property="batchAmount" jdbcType="DECIMAL" />
                <result column="reduceAmount" property="reduceAmount" jdbcType="DECIMAL" />
                <result column="shouldPayAmount" property="shouldPayAmount" jdbcType="DECIMAL" />
                <result column="userPayFeeAmount" property="userPayFeeAmount" jdbcType="DECIMAL" />
                <result column="successAmount" property="successAmount" jdbcType="DECIMAL" />
                <result column="payFailedAmount" property="payFailedAmount" jdbcType="DECIMAL" />
                <result column="rollBackAmount" property="rollBackAmount" jdbcType="DECIMAL" />
                <result column="createTime" property="createTime" jdbcType="TIMESTAMP" />
                <result column="updateTime" property="updateTime" jdbcType="TIMESTAMP" />
                <result column="qunar_trade_no" property="qunar_trade_no" jdbcType="VARCHAR" />
                <result column="paySequenceNo" property="paySequenceNo" jdbcType="VARCHAR"/>
        </resultMap>

        <sql id="base_select">
                SELECT
                id
                ,batchOrderId
                ,batchOrderNo
                ,merchantCode
                ,busiTypeId
                ,payPriority
                ,currentPriority
                ,orderTime
                ,status
                ,transTypeId
                ,batchAmount
                ,reduceAmount
                ,shouldPayAmount
                ,userPayFeeAmount
                ,successAmount
                ,payFailedAmount
                ,rollBackAmount
                ,createTime
                ,updateTime
                ,qunar_trade_no
                ,paySequenceNo
        </sql>

        <sql id="base_where">
                <where >
                        <if test="batchOrderId!=null" >
                                and batchOrderId = #{batchOrderId:BIGINT}
                        </if>
                        <if test="batchOrderNo!=null" >
                                and batchOrderNo = #{batchOrderNo:VARCHAR}
                        </if>
                        <if test="merchantCode!=null" >
                                and merchantCode = #{merchantCode:VARCHAR}
                        </if>
                        <if test="busiTypeId!=null" >
                                and busiTypeId = #{busiTypeId:VARCHAR}
                        </if>
                        <if test="payPriority!=null" >
                                and payPriority = #{payPriority:VARCHAR}
                        </if>
                        <if test="currentPriority!=null" >
                                and currentPriority = #{currentPriority:VARCHAR}
                        </if>
                        <if test="orderTime!=null" >
                                and orderTime = #{orderTime:TIMESTAMP}
                        </if>
                        <if test="status!=null" >
                                and status = #{status:SMALLINT}
                        </if>
                        <if test="transTypeId!=null" >
                                and transTypeId = #{transTypeId:VARCHAR}
                        </if>
                        <if test="batchAmount!=null" >
                                and batchAmount = #{batchAmount:DECIMAL}
                        </if>
                        <if test="reduceAmount!=null" >
                                and reduceAmount = #{reduceAmount:DECIMAL}
                        </if>
                        <if test="shouldPayAmount!=null" >
                                and shouldPayAmount = #{shouldPayAmount:DECIMAL}
                        </if>
                        <if test="userPayFeeAmount!=null" >
                                and userPayFeeAmount = #{userPayFeeAmount:DECIMAL}
                        </if>
                        <if test="successAmount!=null" >
                                and successAmount = #{successAmount:DECIMAL}
                        </if>
                        <if test="payFailedAmount!=null" >
                                and payFailedAmount = #{payFailedAmount:DECIMAL}
                        </if>
                        <if test="rollBackAmount!=null" >
                                and rollBackAmount = #{rollBackAmount:DECIMAL}
                        </if>
                        <if test="createTime!=null" >
                                and createTime = #{createTime:TIMESTAMP}
                        </if>
                        <if test="updateTime!=null" >
                                and updateTime = #{updateTime:TIMESTAMP}
                        </if>
                        <if test="qunar_trade_no!=null and qunar_trade_no!=''">
                                and qunar_trade_no = #{qunar_trade_no:VARCHAR}
                        </if>
                        <if test="paySequenceNo!=null and paySequenceNo!=''">
                                and paySequenceNo = #{paySequenceNo:VARCHAR}
                        </if>
                </where>
        </sql>

        <select id="queryBatchPaymentInfo" resultMap="ibator_BaseResultMap" parameterType="Object" >
                <include refid="base_select"/>
                FROM tbl_batch_payment
                where batchOrderNo = #{batchOrderNo}
        </select>
</mapper>